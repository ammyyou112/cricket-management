# =============================================================================
# CRICKET 360 - Backend Environment Variables
# =============================================================================
# Copy this file to .env and update with your actual values
# DO NOT commit .env to version control!
# =============================================================================

# =============================================================================
# Server Configuration
# =============================================================================
NODE_ENV=development
PORT=3000
HOST=localhost
API_PREFIX=/api/v1

# =============================================================================
# Database Configuration (Supabase PostgreSQL)
# =============================================================================
# Get these from: Supabase Dashboard → Project Settings → Database → Connection String
# Use "Transaction" mode for DATABASE_URL (with pgbouncer on port 6543)
# Use "Session" mode for DIRECT_URL (without pgbouncer on port 5432)

# Connection pooling URL (for Prisma queries - uses pgbouncer)
DATABASE_URL="postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-REF].supabase.co:6543/postgres?pgbouncer=true"

# Direct connection URL (for Prisma migrations - no pgbouncer)
DIRECT_URL="postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres"

# Example format (replace [YOUR-PASSWORD] and [PROJECT-REF]):
# DATABASE_URL="postgresql://postgres:your_secure_password@db.abcdefghijk.supabase.co:6543/postgres?pgbouncer=true"
# DIRECT_URL="postgresql://postgres:your_secure_password@db.abcdefghijk.supabase.co:5432/postgres"

# =============================================================================
# JWT Authentication
# =============================================================================
# Generate random secure strings (minimum 32 characters recommended)
# You can generate secrets using:
#   node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Or use an online generator: https://randomkeygen.com/

JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters-long-change-this-immediately
JWT_REFRESH_SECRET=your-refresh-token-secret-minimum-32-characters-long-change-this-too
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# Token expiration formats:
# - 7d = 7 days
# - 1h = 1 hour
# - 30m = 30 minutes
# - 3600 = 3600 seconds

# =============================================================================
# Supabase Configuration
# =============================================================================
# Get these from: Supabase Dashboard → Project Settings → API
# SUPABASE_URL: Your project URL (found in API Settings)
# SUPABASE_SERVICE_ROLE_KEY: Service role key (found in API Settings → service_role key)
#   ⚠️ WARNING: Service role key has admin privileges - keep it secret!

SUPABASE_URL=https://[PROJECT-REF].supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-from-supabase-api-settings
SUPABASE_STORAGE_BUCKET=cricket360-uploads

# Example:
# SUPABASE_URL=https://abcdefghijk.supabase.co
# SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFiY2RlZmdoaWprIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTY0NTIzNDU2NywiZXhwIjoxOTYwODEwNTY3fQ.xxxxx

# =============================================================================
# CORS & Frontend Configuration
# =============================================================================
# Frontend URL running on Vite dev server (default port 5173)
# Update these to match your frontend URL

CORS_ORIGIN=http://localhost:5173
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:8080,http://localhost:3000
FRONTEND_URL=http://localhost:5173

# Production example:
# CORS_ORIGIN=https://your-frontend-domain.com
# ALLOWED_ORIGINS=https://your-frontend-domain.com,https://www.your-frontend-domain.com
# FRONTEND_URL=https://your-frontend-domain.com

# =============================================================================
# File Upload Configuration
# =============================================================================
# Maximum file size in bytes (default: 5MB = 5242880 bytes)
MAX_FILE_SIZE=5242880
UPLOAD_DIR=./uploads
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/webp

# File size reference:
# 5242880 bytes = 5 MB
# 10485760 bytes = 10 MB
# 20971520 bytes = 20 MB
# Adjust as needed (in bytes)

# =============================================================================
# Rate Limiting
# =============================================================================
# Rate limiting configuration to prevent abuse
# windowMs: Time window in milliseconds
# maxRequests: Maximum number of requests per window per IP

RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Rate limit explanation:
# 900000 ms = 15 minutes
# 100 requests per 15 minutes per IP address
# 
# For production, you may want stricter limits:
# RATE_LIMIT_WINDOW_MS=600000  (10 minutes)
# RATE_LIMIT_MAX_REQUESTS=50   (50 requests per 10 minutes)

# =============================================================================
# Logging Configuration
# =============================================================================
# Log level: error, warn, info, http, verbose, debug, silly
# In production, use 'error' or 'warn' to reduce log volume
# In development, use 'info' or 'debug' for detailed logs

LOG_LEVEL=info
LOG_FILE=./logs/app.log

# Available log levels (from most to least verbose):
# - silly: All logs
# - debug: Debug and above
# - verbose: Verbose and above
# - http: HTTP requests and above
# - info: Info and above (recommended for development)
# - warn: Warnings and errors only
# - error: Errors only (recommended for production)
